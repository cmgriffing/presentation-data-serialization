<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>010-intro</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">


<section id="data-serialization-options" class="slide level1">
<h1>Data Serialization Options</h1>
</section>
<section class="slide level1">

<section id="section" class="level2">
<h2></h2>
<h1>
Basics
</h1>
</section>
<section id="but-why" class="level2">
<h2>But, why?</h2>
<p><img data-src="./assets/but-why.gif" /></p>
</section>
<section id="why-contd." class="level2">
<h2>Why? (contd.)</h2>
<ul>
<li>Save on bandwidth costs</li>
<li>Possibly save on cpu runtime</li>
</ul>
<aside class="notes">
<p>Whether you are sending large or small data, the percentage of bytes saved is directly proportional to your end of month bandwidth cost.</p>
</aside>
</section>
<section id="does-gzip-solve-all-these-problems" class="level2">
<h2>Does Gzip solve all these problems?</h2>
<p>Not quite.</p>
<aside class="notes">
<p>Gzip levels the playing field.</p>
<p>However:</p>
<ul>
<li>Browsers do not gzip data sent to the server</li>
<li>Some formats could still save data even after gzip</li>
</ul>
</aside>
</section>
</section>
<section class="slide level1">

<section id="section-1" class="level2">
<h2></h2>
<h1>
Formats
</h1>
</section>
<section id="json" class="level2">
<h2>JSON</h2>
<p><a href="https://www.json.org/" class="uri">https://www.json.org/</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="er">//</span> <span class="er">Example:</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Something&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="dt">&quot;weight&quot;</span><span class="fu">:</span> <span class="dv">42</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="dt">&quot;contents&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    <span class="st">&quot;widgets&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">    <span class="st">&quot;cogs&quot;</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="fu">}</span></a></code></pre></div>
</section>
<section id="xml" class="level2">
<h2>XML</h2>
<p><img data-src="./assets/xml.gif" /></p>
<p><a href="https://w3.org/XML/" class="uri">https://w3.org/XML/</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;<span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">&lt;root&gt;</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">&lt;name&gt;</span>Something<span class="kw">&lt;/name&gt;</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="kw">&lt;weight&gt;</span>42<span class="kw">&lt;/weight&gt;</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="kw">&lt;contents&gt;</span>widgets<span class="kw">&lt;/contents&gt;</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="kw">&lt;contents&gt;</span>cogs<span class="kw">&lt;/contents&gt;</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">&lt;/root&gt;</span></a></code></pre></div>
<aside class="notes">
<p>Nobody wants to use XML, but it really is better suited for encoding SVG than anything else.</p>
</aside>
</section>
<section id="avro" class="level2">
<h2>Avro</h2>
<p><a href="https://avro.apache.org/" class="uri">https://avro.apache.org/</a></p>
<pre><code>Something(Bwidgetscogs</code></pre>
<aside class="notes">
<ul>
<li>uses a schema</li>
</ul>
</aside>
</section>
<section id="avro-schema" class="level2">
<h2>Avro Schema</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">const</span> example1K <span class="op">=</span> <span class="va">avro</span>.<span class="va">Type</span>.<span class="at">forSchema</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;record&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="dt">fields</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;id&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;index&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;guid&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;isActive&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;boolean&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;balance&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;picture&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;age&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;eyeColor&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;name&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;gender&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;company&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;email&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;phone&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;address&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;about&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;registered&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;latitude&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;float&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;longitude&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;float&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;greeting&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;favoriteFruit&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;tags&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">&#39;array&#39;</span><span class="op">,</span> <span class="dt">items</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">}</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25">    <span class="op">{</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;friends&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27">      <span class="dt">type</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28">        <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;array&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29">        <span class="dt">items</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;record&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31">          <span class="dt">fields</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb4-32" data-line-number="32">            <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;id&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33">            <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;name&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34">          ]</a>
<a class="sourceLine" id="cb4-35" data-line-number="35">        <span class="op">}</span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36">      <span class="op">}</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37">    <span class="op">},</span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38">  ]</a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
</section>
<section id="avro-schema-contd." class="level2">
<h2>Avro Schema (contd.)</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">const</span> exampleArraySchema <span class="op">=</span> <span class="va">avro</span>.<span class="va">Type</span>.<span class="at">forSchema</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;record&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="dt">fields</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;data&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">      <span class="dt">type</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">        <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;array&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">        <span class="dt">items</span><span class="op">:</span> exampleSchema</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">      <span class="op">}</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<aside class="notes">
<ul>
<li>schemas are composable by instance</li>
</ul>
</aside>
</section>
<section id="bencode" class="level2">
<h2>Bencode</h2>
<p><a href="https://en.wikipedia.org/wiki/Bencode" class="uri">https://en.wikipedia.org/wiki/Bencode</a></p>
<ul>
<li>Pronounced “B-encode”</li>
<li>Used by the Bittorrent protocol</li>
</ul>
<pre><code>d8:contentsl7:widgets4:cogse4:name9:Something6:weighti42ee</code></pre>
<aside class="notes">
<ul>
<li>Does not natively support boolean values,</li>
<li>Could cause data corruption,</li>
<li>Converts booleans to 0s and 1s.</li>
</ul>
</aside>
</section>
<section id="bson" class="level2">
<h2>BSON</h2>
<p><a href="http://bsonspec.org/" class="uri">http://bsonspec.org/</a></p>
<ul>
<li>Used by MongoDB</li>
<li>Pronounced [bee · sahn]</li>
<li>Stands for “Binary JSON”</li>
</ul>
<pre><code>Oname
Somethingweight*contents 0widgets1cogs</code></pre>
<aside class="notes">
<p>The bsonspec.org site is somewhat old school.</p>
</aside>
</section>
<section id="messagepack" class="level2">
<h2>MessagePack</h2>
<p><a href="https://msgpack.org/index.html" class="uri">https://msgpack.org/index.html</a></p>
<pre><code>��name�Something�weight*�contents��widgets�cogs</code></pre>
<aside class="notes">
<p>Small integers are encoded into a single byte, and typical short strings require only one extra byte in addition to the strings themselves.</p>
</aside>
</section>
<section id="protobuf" class="level2">
<h2>Protobuf</h2>
<p><a href="https://developers.google.com/protocol-buffers/" class="uri">https://developers.google.com/protocol-buffers/</a></p>
<ul>
<li>By Google</li>
</ul>
<pre><code>Something(Bwidgetscogs</code></pre>
<aside class="notes">
<ul>
<li>uses a schema</li>
<li>excels with numerical data</li>
</ul>
<p>There is not much documentation on the json flavor of scheme definition.</p>
<p>With JSON as a config format, using nested data types requires they be defined within the same nested scope.</p>
</aside>
</section>
<section id="protobuf-schema-proto" class="level2">
<h2>Protobuf Schema (proto)</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode go"><code class="sourceCode go"><a class="sourceLine" id="cb10-1" data-line-number="1">syntax = <span class="st">&quot;proto3&quot;</span>;</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">message SearchRequest {</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="dt">string</span> query = <span class="dv">1</span>;</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  <span class="dt">int32</span> page_number = <span class="dv">2</span>;</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  <span class="dt">int32</span> result_per_page = <span class="dv">3</span>;</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">}</a></code></pre></div>
<aside class="notes">
<p>I did not use proto files.</p>
</aside>
</section>
<section id="protobuff-schema-json" class="level2">
<h2>Protobuff Schema (json)</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">const</span> root <span class="op">=</span> <span class="va">protobuf</span>.<span class="va">Root</span>.<span class="at">fromJSON</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="dt">nested</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">    <span class="dt">Friend</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">      <span class="dt">fields</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">        <span class="dt">id</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int32&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7">          <span class="dt">id</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9">        <span class="dt">name</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11">          <span class="dt">id</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13">      <span class="op">}</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14">    <span class="op">},</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15">    <span class="dt">Example</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16">      <span class="dt">fields</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17">        <span class="co">// Primary</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18">        <span class="dt">id</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20">          <span class="dt">id</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-22" data-line-number="22">        <span class="dt">index</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int32&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24">          <span class="dt">id</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-25" data-line-number="25">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-26" data-line-number="26">        <span class="dt">guid</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-27" data-line-number="27">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-28" data-line-number="28">          <span class="dt">id</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-29" data-line-number="29">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-30" data-line-number="30">        <span class="co">// Non-Primary</span></a>
<a class="sourceLine" id="cb11-31" data-line-number="31">        <span class="dt">isActive</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-32" data-line-number="32">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;bool&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-33" data-line-number="33">          <span class="dt">id</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-34" data-line-number="34">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-35" data-line-number="35">        <span class="dt">balance</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-36" data-line-number="36">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-37" data-line-number="37">          <span class="dt">id</span><span class="op">:</span> <span class="dv">21</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-38" data-line-number="38">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-39" data-line-number="39">        <span class="dt">picture</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-40" data-line-number="40">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-41" data-line-number="41">          <span class="dt">id</span><span class="op">:</span> <span class="dv">22</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-42" data-line-number="42">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-43" data-line-number="43">        <span class="dt">age</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-44" data-line-number="44">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;int32&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-45" data-line-number="45">          <span class="dt">id</span><span class="op">:</span> <span class="dv">23</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-46" data-line-number="46">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-47" data-line-number="47">        <span class="dt">eyeColor</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-48" data-line-number="48">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-49" data-line-number="49">          <span class="dt">id</span><span class="op">:</span> <span class="dv">24</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-50" data-line-number="50">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-51" data-line-number="51">        <span class="dt">name</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-52" data-line-number="52">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-53" data-line-number="53">          <span class="dt">id</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-54" data-line-number="54">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-55" data-line-number="55">        <span class="dt">gender</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-56" data-line-number="56">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-57" data-line-number="57">          <span class="dt">id</span><span class="op">:</span> <span class="dv">26</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-58" data-line-number="58">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-59" data-line-number="59">        <span class="dt">company</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-60" data-line-number="60">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-61" data-line-number="61">          <span class="dt">id</span><span class="op">:</span> <span class="dv">27</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-62" data-line-number="62">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-63" data-line-number="63">        <span class="dt">email</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-64" data-line-number="64">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-65" data-line-number="65">          <span class="dt">id</span><span class="op">:</span> <span class="dv">28</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-66" data-line-number="66">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-67" data-line-number="67">        <span class="dt">phone</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-68" data-line-number="68">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-69" data-line-number="69">          <span class="dt">id</span><span class="op">:</span> <span class="dv">29</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-70" data-line-number="70">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-71" data-line-number="71">        <span class="dt">address</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-72" data-line-number="72">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-73" data-line-number="73">          <span class="dt">id</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-74" data-line-number="74">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-75" data-line-number="75">        <span class="dt">about</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-76" data-line-number="76">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-77" data-line-number="77">          <span class="dt">id</span><span class="op">:</span> <span class="dv">31</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-78" data-line-number="78">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-79" data-line-number="79">        <span class="dt">registered</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-80" data-line-number="80">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-81" data-line-number="81">          <span class="dt">id</span><span class="op">:</span> <span class="dv">32</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-82" data-line-number="82">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-83" data-line-number="83">        <span class="dt">latitude</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-84" data-line-number="84">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;float&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-85" data-line-number="85">          <span class="dt">id</span><span class="op">:</span> <span class="dv">33</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-86" data-line-number="86">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-87" data-line-number="87">        <span class="dt">longitude</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-88" data-line-number="88">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;float&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-89" data-line-number="89">          <span class="dt">id</span><span class="op">:</span> <span class="dv">34</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-90" data-line-number="90">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-91" data-line-number="91">        <span class="dt">tags</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-92" data-line-number="92">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-93" data-line-number="93">          <span class="dt">id</span><span class="op">:</span> <span class="dv">35</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-94" data-line-number="94">          <span class="dt">rule</span><span class="op">:</span> <span class="st">&#39;repeated&#39;</span></a>
<a class="sourceLine" id="cb11-95" data-line-number="95">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-96" data-line-number="96">        <span class="dt">friends</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-97" data-line-number="97">          <span class="dt">id</span><span class="op">:</span> <span class="dv">36</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-98" data-line-number="98">          <span class="dt">rule</span><span class="op">:</span> <span class="st">&#39;repeated&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-99" data-line-number="99">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;Friend&#39;</span></a>
<a class="sourceLine" id="cb11-100" data-line-number="100">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-101" data-line-number="101">        <span class="dt">greeting</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-102" data-line-number="102">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-103" data-line-number="103">          <span class="dt">id</span><span class="op">:</span> <span class="dv">37</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-104" data-line-number="104">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-105" data-line-number="105">        <span class="dt">favoriteFruit</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-106" data-line-number="106">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;string&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-107" data-line-number="107">          <span class="dt">id</span><span class="op">:</span> <span class="dv">38</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-108" data-line-number="108">        <span class="op">},</span></a>
<a class="sourceLine" id="cb11-109" data-line-number="109">      <span class="op">}</span></a>
<a class="sourceLine" id="cb11-110" data-line-number="110">    <span class="op">},</span></a>
<a class="sourceLine" id="cb11-111" data-line-number="111">    <span class="dt">Examples</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-112" data-line-number="112">      <span class="dt">fields</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-113" data-line-number="113">        <span class="dt">data</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-114" data-line-number="114">          <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;Example&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-115" data-line-number="115">          <span class="dt">id</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-116" data-line-number="116">          <span class="dt">rule</span><span class="op">:</span> <span class="st">&#39;repeated&#39;</span></a>
<a class="sourceLine" id="cb11-117" data-line-number="117">        <span class="op">}</span></a>
<a class="sourceLine" id="cb11-118" data-line-number="118">      <span class="op">}</span></a>
<a class="sourceLine" id="cb11-119" data-line-number="119">    <span class="op">}</span></a>
<a class="sourceLine" id="cb11-120" data-line-number="120">  <span class="op">}</span></a>
<a class="sourceLine" id="cb11-121" data-line-number="121"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<aside class="notes">
<p>JSON format is not documented very well.</p>
<p>I had to guess at how the nesting worked.</p>
</aside>
</section>
<section id="others-unimplemented-here" class="level2">
<h2>Others (unimplemented here)</h2>
<ul>
<li>Flatbuffers</li>
<li>Thrift</li>
<li>YAML</li>
<li>SOAP</li>
</ul>
<aside class="notes">
<ul>
<li>Flatbuffers required doing a local build via CMAKE.
<ul>
<li>One important thing is that you can operate upon a FlatBuffer without deserializing it from its underlying arrayBuffer.</li>
</ul></li>
<li><p>Thrift bares too many similarities to Protobuf with no discernible benefits</p></li>
<li><p>YAML is YAML</p></li>
<li><p>SOAP is almost always going to be asked about. SOAP is just a superset of XML (read: worse XML) and is more of a protocol than a serialization format</p></li>
</ul>
</aside>
</section>
</section>
<section class="slide level1">

<!--

Synopsis: There are alternatives to JSON for sending data from client to server or between servers. What do they do and what do they look like? What are their benefits?Payload size? Encoding or Decoding speed? Let's find out. JSON is probably sufficient for most cases, but let's try and find the edge cases where you might want improvement.

-->
<section id="section-2" class="level2">
<h2></h2>
<h1>
Testing Methodology
</h1>
</section>
<section id="different-object-sizes" class="level2">
<h2>Different Object Sizes</h2>
<ul>
<li>medium (~10kb)</li>
<li>large (~100kb)</li>
</ul>
</section>
<section id="metrics" class="level2">
<h2>Metrics</h2>
</section>
<section id="content-length-uncompressed" class="level2">
<h2>Content-Length (Uncompressed)</h2>
<div class="col-2">
<p><img data-src="./assets/size-10k.svg" /></p>
</div>
<div class="col-2">
<p><img data-src="./assets/size-100k.svg" /></p>
</div>
</section>
<section id="content-length-gzipped" class="level2">
<h2>Content-Length (Gzipped)</h2>
<div class="col-2">
<p><img data-src="./assets/gzip-size-10k.svg" /></p>
</div>
<div class="col-2">
<p><img data-src="./assets/gzip-size-100k.svg" /></p>
</div>
</section>
<section id="library-overhead" class="level2">
<h2>Library overhead</h2>
<div class="col-2">
<p><img data-src="./assets/lib-size.svg" /></p>
</div>
<div class="col-2">
<p><img data-src="./assets/lib-gzip-size.svg" /></p>
</div>
</section>
<section id="section-3" class="level2">
<h2></h2>
<h1>
Browser Runtimes
</h1>
<aside class="notes">
<p>Chrome only so far</p>
<p>Take these with a grain of salt.</p>
</aside>
</section>
<section id="browser-encoding-10k" class="level2">
<h2>Browser: Encoding 10K</h2>
<p><img data-src="./assets/browser-encoding-10k.svg" /></p>
</section>
<section id="browser-encoding-100k" class="level2">
<h2>Browser: Encoding 100K</h2>
<p><img data-src="./assets/browser-encoding-100k.svg" /></p>
</section>
<section id="browser-decoding-10k" class="level2">
<h2>Browser: Decoding 10K</h2>
<p><img data-src="./assets/browser-decoding-10k.svg" /></p>
</section>
<section id="browser-decoding-100k" class="level2">
<h2>Browser: Decoding 100K</h2>
<p><img data-src="./assets/browser-decoding-100k.svg" /></p>
</section>
<section id="section-4" class="level2">
<h2></h2>
<h1>
Node CPU Runtime
</h1>
<aside class="notes">
<p>Its important to note that Node optimizes for JSON.</p>
<p>Other platforms might see results that favor JSON much less.</p>
</aside>
</section>
<section id="node-encoding-10k" class="level2">
<h2>Node: Encoding 10K</h2>
<p><img data-src="./assets/encoding-10k.svg" /></p>
</section>
<section id="node-encoding-100k" class="level2">
<h2>Node: Encoding 100K</h2>
<p><img data-src="./assets/encoding-100k.svg" /></p>
</section>
<section id="node-decoding-10k" class="level2">
<h2>Node: Decoding 10K</h2>
<p><img data-src="./assets/decoding-10k.svg" /></p>
</section>
<section id="node-decoding-100k" class="level2">
<h2>Node: Decoding 100K</h2>
<p><img data-src="./assets/decoding-100k.svg" /></p>
</section>
<section id="section-5" class="level2">
<h2></h2>
<h1>
Other Languages
</h1>
</section>
<section id="go" class="level2">
<h2>Go</h2>
<p><a href="https://github.com/alecthomas/go_serialization_benchmarks" class="uri">https://github.com/alecthomas/go_serialization_benchmarks</a></p>
</section>
<section id="java" class="level2">
<h2>Java</h2>
<p><img data-src="./assets/java-performance.png" /></p>
<p><a href="https://dzone.com/articles/is-protobuf-5x-faster-than-json" class="uri">https://dzone.com/articles/is-protobuf-5x-faster-than-json</a></p>
<aside class="notes">
<ul>
<li>2-part series</li>
<li>shows Java has some JSON libraries that are faster than protobuf for general data</li>
</ul>
</aside>
</section>
</section>
<section class="slide level1">

<section id="citations" class="level2">
<h2>Citations</h2>
<ul>
<li><p>https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats</p></li>
<li><p>MSGPACK benchmarks: https://github.com/ludocode/schemaless-benchmarks#test-data</p></li>
</ul>
<style>

  code, pre {
    background: white;
  }

  .reveal section img {
    max-height: 30vh;
  }

  .col-2 {
    width: 50%;
    float: left;
  }

</style>
</section>
</section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
